# /etc/zshrc: DO NOT EDIT -- this file has been generated automatically.
# This file is read for interactive shells.
#
# Note that generated /etc/zprofile and /etc/zshrc files do a lot of
# non-standard setup to make zsh usable with no configuration by default.
#
# Which means that unless you explicitly meticulously override everything
# generated, interactions between your ~/.zshrc and these files are likely
# to be rather surprising.
#
# Note however, that you can disable loading of the generated /etc/zprofile
# and /etc/zshrc (you can't disable loading of /etc/zshenv, but it is
# designed to not set anything surprising) by setting `no_global_rcs` option
# in ~/.zshenv:
#
#   echo setopt no_global_rcs >> ~/.zshenv
#
# See "STARTUP/SHUTDOWN FILES" section of zsh(1) for more info.


# Only execute this file once per shell.
if [ -n "$__ETC_ZSHRC_SOURCED" -o -n "$NOSYSZSHRC" ]; then return; fi
__ETC_ZSHRC_SOURCED=1

# Set zsh options.
setopt HIST_IGNORE_DUPS SHARE_HISTORY HIST_FCNTL_LOCK


# Alternative method of determining short and full hostname.
HOST=nixos

# Setup command line history.
# Don't export these, otherwise other shells (bash) will try to use same HISTFILE.
SAVEHIST=20000
HISTSIZE=20000
HISTFILE=$HOME/.zsh_history

# Configure sane keyboard defaults.
. /etc/zinputrc

# Enable autocompletion.
autoload -U compinit && compinit




# Setup custom interactive shell init stuff.


# oh-my-zsh configuration generated by NixOS
export ZSH=/nix/store/fjmhp098hm8pgsncqdc0mqiqwmca4pd2-oh-my-zsh-2025-04-29/share/oh-my-zsh

plugins=(git sudo nix-shell zsh-syntax-highlighting zsh-autosuggestions)



ZSH_THEME="spaceship-prompt/spaceship"

if [[ ! -d "$HOME/.cache/oh-my-zsh" ]]; then
  mkdir -p "$HOME/.cache/oh-my-zsh"
fi
ZSH_CACHE_DIR=$HOME/.cache/oh-my-zsh



source $ZSH/oh-my-zsh.sh


# This function is called whenever a command is not found.
command_not_found_handler() {
  local p='/nix/store/j2wv0f8r71xma0m46738s81mkwlfk890-command-not-found/bin/command-not-found'
  if [ -x "$p" ] && [ -f '/nix/var/nix/profiles/per-user/root/channels/nixos/programs.sqlite' ]; then
    # Run the helper program.
    "$p" "$@"

    # Retry the command if we just installed it.
    if [ $? = 126 ]; then
      "$@"
    else
      return 127
    fi
  else
    # Indicate than there was an error so ZSH falls back to its default handler
    echo "$1: command not found" >&2
    return 127
  fi
}

# Show current working directory in VTE terminals window title.
# Supports both bash and zsh, requires interactive shell.
. /nix/store/n9aic8nrdxj2i6i1fpn0802kx8l7b0ij-vte-0.80.1/etc/profile.d/vte.sh


# Extra colors for directory listings.
eval "$(/nix/store/mp7ba85zcqdj2sqwa29pql02s6nqpcxy-coreutils-9.7/bin/dircolors -b)"


# Setup aliases.
alias -- cp='cp -iv'
alias -- df='df -h'
alias -- du='du -h'
alias -- k9='kill -9'
alias -- l='ls -alh'
alias -- la='ls -la'
alias -- ll='ls -l'
alias -- ls='ls --color=tty'
alias -- mkdir='mkdir -p'
alias -- mv='mv -iv'
alias -- rm='rm -iv'
alias -- switch='sudo nixos-rebuild switch'

# Setup prompt.


# Disable some features to support TRAMP.
if [ "$TERM" = dumb ]; then
    unsetopt zle prompt_cr prompt_subst
    unset RPS1 RPROMPT
    PS1='$ '
    PROMPT='$ '
fi

# Read system-wide modifications.
if test -f /etc/zshrc.local; then
    . /etc/zshrc.local
fi
